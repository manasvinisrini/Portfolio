---
layout: page
title: Boeing Project - Part II
subtitle: Northwestern University&#58; MSR Final Project
---
	<h3>Technical Skills</h3>
	<ul>
        <li>3D CAD with Onshape</li>
        <li>PCB Design &amp; Soldering</li>
        <li>Crimping &amp; Wiring Design</li>
        <li>Programming the <a href="https://www.digikey.com/product-detail/en/texas-instruments/EK-TM4C123GXL/296-35760-ND/3996736" target="_blank">Tiva C Series microcontroller</a></li>
        <li>ROS Kinetic</li>
        <li>Mobile Robot Kinematics</li>
        <li>Ubuntu 16.04 LTS</li>
        <li>SLAM &amp; Sensor Fusion</li>
        <li>Python &amp; C/C++</li>
	  <li>Setting up the <a href="https://www.intel.com/content/www/us/en/products/boards-kits/nuc/kits/nuc7i7bnh.html"target="_blank">Intel NUC Kit NUC7i7BNH</a></li>
	</ul>
	<hr />
    <h3>Introduction</h3>
    <p>As mentioned on the Project page, this quarter brought forth some major changes, even some updates to the design proposed last quarter! For that reason, this post will attempt to describe the new build process of the Omni robot from the ground up, possibly overlapping from the last post but making up for it by explaining things in a sequential, easy to understand manner. That said, the goal of the project remained the same - to build and program three mobile platforms such that they are able to move as one rigid body. This is imperative as each platform will be carrying an inverted robotic delta arm (designed by Matthew Elwin and William Hunt) which in turn will be supporting part of a large rigid object. Without the platforms moving as one entity (i.e. in a formation), it will not be possible for the delta arms to maintain their hold on the rigid object. This is also why it is vital that the odometry calculated by each robot is as accurate as possible - to minimize drift that could ruin the formation. To accomplish this, there were five main tasks that were involved:</p>

    <figure style="text-align: center; float: right; font-style: italic; width: 30%; margin-left: 1%">
      <img src="images/sabertooth.png" style = "height: 275px;">
      <p>Figure 2: Sabertooth 2x25A V2</p>
    </figure>
    <figure style="text-align: center; float: right; font-style: italic; width: 30%;">
      <img src="images/motor.png" style= "height: 275px;">
      <p>Figure 1: IG52-04 24VDC 285 RPM motor</p>
    </figure>

    <ul>
        <li>Wiring &amp; PCB Design</li>
        <li>Programming the Tiva microcontrollers</li>
        <li>Physical Design &amp; Placement of Sensors</li>
        <li>Control of a Single Robot including Odometry Calculation &amp; Verification along with Sensor Fusion</li>
        <li>Formation Control of all Three Robots</li>
    </ul>
    <h3>Wiring &amp; PCB Design</h3>
    <p>This section provides a mid-level overview of how all the electronics were connected, starting from the motor and going all the way up to the sensors. Before starting, it should be noted that unless otherwise stated, all parts were sourced from the <a href="https://www.superdroidrobots.com/shop/item.aspx/programmable-mecanum-wheel-vectoring-robot-ig52-db/1788/" target="_blank">Programmable Mecanum Wheel Vectoring Robot - IG52 DB</a> product on SuperDroid Robots' website. As shown in Figure 1, a brushed 24VDC motor, capable of going 285 RPM and complete with a dual channel/quadrature magnetic encoder was used for this project. Four of these were installed in the aluminum chassis with enough combined torque to move the robot while carrying a 200lb payload! In regards to connections, the Sabertooth motor driver (Figure 2) can provide 25A to two motors (one pair of red/black leads wired to M1A/M1B, and the other pair to M2A/M2B). As the motors have a rated current of up to 2.85A, this driver is more than able to do the job. The middle two terminals of the Sabertooth (B+/B-) were then wired to a 24V busbar (powered by two 12V 18Ah Interstate SLA batteries hooked up in series) via a 25A 4PST switch. For safety, a 6.3A Slow fuse was hooked up between B+ and the 24V (2.85A*2 < 6.3A). Since there are four motors, two Sabertooths were installed - one on either side of the robot.
    </p>
    <figure style="text-align: center; float: left; font-style: italic; width: 50%; margin-right: 2%">
      <img src="images/wheel_tiva.JPG" style = "width: 100%;">
      <p>Figure 3: PCB to control the Wheels</p>
    </figure>
     <p>With a good understanding now of how the motors are powered, the wiring needed to control them can be discussed. In the previous paragraph, I mentioned that each motor has a quadrature encoder which can be used to measure its speed. Four wires come out from the encoder. Two of them represent Channel A and B and the other two provide 5V and Ground. Unfortunately, the Tiva microcontroller that is being used only has two quadrature encoder peripherals (aka QEI pins). As a result, only two motors' encoder wires can be hooked up to any one microcontroller. Thus, two PCBs were made to aid in the motor control process. Known as the 'Wheel Control Board' (shown in Figure 3), each board contains two four-pin JST housings for two sets of encoders (by the yellow heat-shrink in Figure 3). Additionally, it holds a three-pin JST housing (by the black heat-shrink) for three wires that connect to the 0V, 5V, and S1 pins on the Sabertooth (Figure 2). The Tiva microcontroller uses these three pins to send packetized serial commands to the Sabertooth. The 0V pin provides a ground reference for the signal pin (S1), and due to how the <a href="https://www.dimensionengineering.com/datasheets/Sabertooth2x25v2.pdf" target="_blank">packetized serial mode</a> works on the Sabertooth, the Tiva can send commands via the S1 pin to both of the motors hooked up to the Sabertooth. Finally, in order to isolate the 'high voltage' motor driver from the 'low voltage' Tiva board, the <a href="https://www.digikey.com/product-detail/en/texas-instruments/ISO3086DWR/296-41273-1-ND/5222737" target="_blank">ISO3086DWR</a> isolated RS485 chip was placed between them. The 'high' 5V from the Sabertooth was then used to power the 'high' side of the chip.
    </p>
